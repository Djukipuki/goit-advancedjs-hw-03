{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/elementManager.js","../src/js/index.js"],"sourcesContent":["import axios from \"axios\";\n\nconst CAT_API_KEY = \"live_CgFNJ52ujOJpDB32oyPIWsDLhJLkQck9ObP4pbWX6xNuFZ0SXuimVoJ674rK3QhY\";\nconst CAT_BASE_URL = \"https://api.thecatapi.com/v1\";\n\nconst CAT_BREEDS_PATH = '/breeds';\nconst CAT_IMAGES_SEARCH_PATH = '/images/search';\n\nconst catApi = axios.create({\n  baseURL: CAT_BASE_URL,\n  headers: {'x-api-key': CAT_API_KEY}\n});\n\nexport const fetchBreeds = () => {\n  return catApi.get(CAT_BREEDS_PATH);\n}\n\nexport const fetchCatByBreedId = (id) => {\n  const searchParams = new URLSearchParams({\n    breed_ids: id,\n  });\n\n  return catApi.get(`${CAT_IMAGES_SEARCH_PATH}?${searchParams}`);\n}\n","const show = (element) => {\n  element.classList.remove('visually-hidden');\n}\n\nconst hide = (element) => {\n  element.classList.add('visually-hidden');\n}\n\nexport default {\n  show,\n  hide,\n};\n","import SlimSelect from \"slim-select\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { fetchBreeds, fetchCatByBreedId } from \"./cat-api.js\";\nimport elementManager from './elementManager.js';\n\nconst breedSelect = document.querySelector('.breed-select');\nconst loader = document.querySelector('.loader');\nconst catInfo = document.querySelector('.cat-info');\n\nelementManager.show(loader);\n\nconst drawBreedList = (data) => {\n  const breedData = data.map(({ id, name }) => {\n    return { text: name, value: id };\n  });\n\n  breedData.unshift({text: '', placeholder: true});\n\n  breedSlimSelect.setData(breedData);\n\n  elementManager.hide(loader);\n  elementManager.show(breedSelect);\n}\n\nconst drawCat = (data) => {\n  const { url, breeds: [{ name, temperament, description }] } = data;\n\n  catInfo.innerHTML = `\n    <img class=\"cat-img\" src=\"${url}\" alt=\"${name}\">\n    <div class=\"cat-content\">\n      <div class=\"cat-name\">${name}</div>\n      <div class=\"cat-description\">${description}</div>\n      <div class=\"cat-temperament\">Temperament: ${temperament}</div>\n    </div>\n  `;\n\n  elementManager.hide(loader);\n  elementManager.show(catInfo);\n}\n\nconst breedSlimSelect = new SlimSelect({\n  select: breedSelect,\n  settings: {\n    placeholderText: 'Select a cat',\n  },\n  events: {\n    afterChange: (newVal) => {\n      const breedId = newVal[0].value;\n\n      if (breedId) {\n        elementManager.hide(catInfo);\n        elementManager.show(loader);\n\n        fetchCatByBreedId(breedId)\n          .then(({ data }) => drawCat(data[0]))\n          .catch(() => {\n            iziToast.error({\n              message: \"Oops! Something went wrong! Try reloading the page!\",\n              position: \"topRight\",\n            })\n          });\n      }\n    }\n  }\n})\n\nfetchBreeds()\n  .then(({ data }) => drawBreedList(data))\n  .catch(() => {\n    iziToast.error({\n      message: \"Oops! Something went wrong! Try reloading the page!\",\n      position: \"topRight\",\n    })\n  });\n"],"names":["CAT_API_KEY","CAT_BASE_URL","CAT_BREEDS_PATH","CAT_IMAGES_SEARCH_PATH","catApi","axios","fetchBreeds","fetchCatByBreedId","id","searchParams","show","element","hide","elementManager","breedSelect","loader","catInfo","drawBreedList","data","breedData","name","breedSlimSelect","drawCat","url","temperament","description","SlimSelect","newVal","breedId","iziToast"],"mappings":"owBAEA,MAAMA,EAAc,wEACdC,EAAe,+BAEfC,EAAkB,UAClBC,EAAyB,iBAEzBC,EAASC,EAAM,OAAO,CAC1B,QAASJ,EACT,QAAS,CAAC,YAAaD,CAAW,CACpC,CAAC,EAEYM,EAAc,IAClBF,EAAO,IAAIF,CAAe,EAGtBK,EAAqBC,GAAO,CACvC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,UAAWD,CACf,CAAG,EAED,OAAOJ,EAAO,IAAI,GAAGD,KAA0BM,GAAc,CAC/D,ECvBMC,EAAQC,GAAY,CACxBA,EAAQ,UAAU,OAAO,iBAAiB,CAC5C,EAEMC,EAAQD,GAAY,CACxBA,EAAQ,UAAU,IAAI,iBAAiB,CACzC,EAEeE,EAAA,CACb,KAAAH,EACA,KAAAE,CACF,ECJME,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElDH,EAAe,KAAKE,CAAM,EAE1B,MAAME,EAAiBC,GAAS,CAC9B,MAAMC,EAAYD,EAAK,IAAI,CAAC,CAAE,GAAAV,EAAI,KAAAY,MACzB,CAAE,KAAMA,EAAM,MAAOZ,CAAE,EAC/B,EAEDW,EAAU,QAAQ,CAAC,KAAM,GAAI,YAAa,EAAI,CAAC,EAE/CE,EAAgB,QAAQF,CAAS,EAEjCN,EAAe,KAAKE,CAAM,EAC1BF,EAAe,KAAKC,CAAW,CACjC,EAEMQ,EAAWJ,GAAS,CACxB,KAAM,CAAE,IAAAK,EAAK,OAAQ,CAAC,CAAE,KAAAH,EAAM,YAAAI,EAAa,YAAAC,CAAW,CAAE,CAAG,EAAGP,EAE9DF,EAAQ,UAAY;AAAA,gCACUO,WAAaH;AAAA;AAAA,8BAEfA;AAAA,qCACOK;AAAA,kDACaD;AAAA;AAAA,IAIhDX,EAAe,KAAKE,CAAM,EAC1BF,EAAe,KAAKG,CAAO,CAC7B,EAEMK,EAAkB,IAAIK,EAAW,CACrC,OAAQZ,EACR,SAAU,CACR,gBAAiB,cAClB,EACD,OAAQ,CACN,YAAca,GAAW,CACvB,MAAMC,EAAUD,EAAO,GAAG,MAEtBC,IACFf,EAAe,KAAKG,CAAO,EAC3BH,EAAe,KAAKE,CAAM,EAE1BR,EAAkBqB,CAAO,EACtB,KAAK,CAAC,CAAE,KAAAV,CAAM,IAAKI,EAAQJ,EAAK,EAAE,CAAC,EACnC,MAAM,IAAM,CACXW,EAAS,MAAM,CACb,QAAS,sDACT,SAAU,UACxB,CAAa,CACb,CAAW,EAEN,CACF,CACH,CAAC,EAEDvB,EAAa,EACV,KAAK,CAAC,CAAE,KAAAY,CAAM,IAAKD,EAAcC,CAAI,CAAC,EACtC,MAAM,IAAM,CACXW,EAAS,MAAM,CACb,QAAS,sDACT,SAAU,UAChB,CAAK,CACL,CAAG"}